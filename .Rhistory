CareerService17<- df_sss17 %>% filter(!is.na(`Career Services`)) %>%
group_by(`Career Services`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#.2f%%" )) #'%#.2f'
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#.2f%%" )) #'%#.2f'
Bookstore17
library(ggplot2)
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col()
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057")
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff")
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()
#
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#.0f%%" )) #'%#.2f'
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#0f%%" )) #'%#.2f'
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#.1f%%" )) #'%#.2f'
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
ggtitle = "Bookstore Satisfaction (2017)"
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic() %>%
ggtitle = "Bookstore Satisfaction (2017)"
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 20))
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12))
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5))
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5))+
labs(x = "Satisfaction",
y = "")
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = -0.5, size = 5)
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = -0.5, size = 1)
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = -0.5, size = 3)
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = -0.5, size = 3, color="#003057")
Bookstore17 %>% ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff")
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>% factor(levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A')) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
Bookstore17 %>%
factor(levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A')) %>%
ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
Bookstore17 %>%  mutate(Bookstore = fct_reorder(Bookstore, c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))) %>%  #factor(levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A')) %>%
ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
df_sss17$Bookstore = factor(df_sss17$Bookstore, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
Bookstore17
Bookstore17 %>%
ggplot(aes(x = Bookstore, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Bookstore Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
#registar office
#go through each item
#1.as factor
df_sss17$`Registrar's Office` = factor(df_sss17$`Registrar's Office`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
#2.pivot table
Registrar17<- df_sss17 %>%
filter(!is.na(`Registrar's Office`)) %>%
group_by(`Registrar's Office`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
#3.bar plot
Registrar17 %>%
ggplot(aes(x = `Registrar's Office`, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "`Registrar's Office` Satisfaction (2017)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
list.files()
sss18<-read_csv("2018SSSRaw.csv")
names(sss18)
glimpse(sss18$`Invite Custom Field 1`)
sss18.slct<-sss18 %>% select(contains(":Please rate"))
names(sss18.slct)
df_sss18<-as.data.frame(sss18.slct)
str(df_sss18)
list.files()
sss21<-read_excel("2021 SSS Raw.xlsx")
names(sss21)
library(readxl) #for read_excel
sss21<-read_excel("2021 SSS Raw.xlsx")
names(sss21)
sss21.qual<-select(sss21, starts_with("Please explain"))
names(sss21.qual)
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.1))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
str(df_sss21)
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.1))
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.slct))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
str(df_sss21)
names(sss21.slct)
df_sss21[1]
df_sss21[1]<- df_sss21 %>%
filter(!is.na(df_sss21[1])) %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
df_sss21[1]<- df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
Facilities21<- df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
Facilities21<- df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n())
Facilities21<- df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`) %>%
summarize(cnt = n())
df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`))
df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)
Facilities21<- df_sss21 %>%
filter(!is.na(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(df_sss21$`Overall Services`) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[2]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[3]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[4]) %>%
summarize(cnt = n())
df_sss21[1:3]<- factor(df_sss21[1:3],levels=c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
str(df_sss21[1:3])
typeof(df_sss21[1:3])
typeof(df_sss21[4])
typeof(df_sss21[1])
df_sss21[1]<- factor(df_sss21[1],levels=c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
typeof(df_sss21[1])
df_sss21 %>%
group_by(df_sss21[4]) %>%
summarize(cnt = n())
is.factor(df_sss21[1])
is.factor(df_sss21[Bookstore])
is.factor(df_sss21[df_sss17$Bookstore])
df_sss21 %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n())
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
df_sss21 %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[4]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
df_sss21 %>%
group_by(df_sss21[2]) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
df_sss21 %>%
group_by(df_sss21[2]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[4]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[3]) %>%
summarize(cnt = n())
#-----------------------------------------------------------------------------
#read data files, initial exploration
sss21<-read_excel("2021 SSS Raw.xlsx")
names(sss21)
#glimpse(sss21$`Invite Custom Field 1`)
#select (and rename) variables to build separate data frames
sss21.qual<-select(sss21, starts_with("Please explain"))
names(sss21.qual)
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.slct))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
df_sss21 %>%
group_by(df_sss21[2]) %>%
summarize(cnt = n())
df_sss21[2]<- factor(df_sss21[2],levels=c('Poor', 'Acceptable', 'Good', 'Excellent'))
df_sss21 %>%
group_by(df_sss21[2]) %>%
summarize(cnt = n())
is.factor(df_sss21[1])
count(df_sss21[1]) %>% as_factor()
is.factor(df_sss21[1])
Bookstore17<- df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n())
df_sss17 %>%
filter(!is.na(`Bookstore`)) %>%
group_by(`Bookstore`) %>%
summarize(cnt = n())
is.factor(df_sss17$Bookstore)
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.slct))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
df_sss21[1:3] = factor(df_sss21[1:3],levels=c('Poor', 'Acceptable', 'Good', 'Excellent'))
is.factor(df_sss21[1:3])
df_sss21[1] = factor(df_sss21[1],levels=c('Poor', 'Acceptable', 'Good', 'Excellent'))
is.factor(df_sss21[1])
#-----------------------------------------------------------------------------
#read data files, initial exploration
sss21<-read_excel("2021 SSS Raw.xlsx")
names(sss21)
#glimpse(sss21$`Invite Custom Field 1`)
#select (and rename) variables to build separate data frames
sss21.qual<-select(sss21, starts_with("Please explain"))
names(sss21.qual)
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.slct))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
df_sss21[1] = factor(df_sss21[1],levels=c('Poor', 'Acceptable', 'Good', 'Excellent'))
is.factor(df_sss21[1])
df_sss21[2] = factor(df_sss21[2],levels=c('Poor', 'Acceptable', 'Good', 'Excellent'))
is.factor(df_sss21[2])
df_sss21 %>%
group_by(df_sss21[3]) %>%
summarize(cnt = n())
df_sss21 %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n())
df_sss21[3] = factor(df_sss21[3], levels=c('Poor', 'Acceptable', 'Good', 'Excellent'))
is.factor(df_sss21[3])
set_value_labels(
df_sss21[1] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3),
df_sss21[2] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3))
set_value_labels(
df_sss21[1] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3),
df_sss21[2] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3))
df_sss21[1] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3))
df_sss21[1]
df_sss21[[1]]
df_sss21 %>%
group_by(df_sss21[1]) %>%
summarize(cnt = n())
df_sss21[4]
df_sss21[4]<- as_factor(df_sss21[4],levels=c('Extremely Dissatisfied', 'Dissatisfied', 'Satisfied ', 'Extremely Satisfied','Not Used'))
df_sss21[4]<- as_factor(df_sss21[4])
is.factor(df_sss21[4])
df_sss21[4]
set_value_labels(df_sss21[1] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3))
set_value_labels(df_sss21[1]=c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3))
set_value_labels(df_sss21, df_sss21[1] = c("Poor" = 0, "Acceptable" = 1, "Good" = 2, "Excellent" = 3))
str(df_sss21)
df_sss21 %>%
group_by(df_sss21[2]) %>%
summarize(cnt = n())
df_sss21[4]<- as_factor(df_sss21[4])
str(df_sss21)
str(df_sss21)[4]
df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)` = factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
is.factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`)
facilities21<- df_sss21 %>%
filter(!is.na(`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(`Overall facilities (i.e. academic, residential and recreational spaces)`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
facilities21
View(facilities21)
df_sss21 %>%
filter(!is.na(`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(`Overall facilities (i.e. academic, residential and recreational spaces)`) %>%
summarize(cnt = n())
df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`
df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)` = factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'),labels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`
#-----------------------------------------------------------------------------
#read data files, initial exploration
sss21<-read_excel("2021 SSS Raw.xlsx")
names(sss21)
#glimpse(sss21$`Invite Custom Field 1`)
#select (and rename) variables to build separate data frames
sss21.qual<-select(sss21, starts_with("Please explain"))
names(sss21.qual)
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.slct))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
str(df_sss21)
test<- as_factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'),labels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
test
testf<- as_factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
testf
testf<- factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
testf
#1.as factor
df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`<- factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
#2.pivot table
facilities21<- df_sss21 %>%
filter(!is.na(`Overall facilities (i.e. academic, residential and recreational spaces)`)) %>%
group_by(`Overall facilities (i.e. academic, residential and recreational spaces)`) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
facilities21
facilities21 %>%
ggplot(aes(x = facilities21, y = percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Overall facilities (i.e. academic, residential and recreational spaces) Satisfaction (2021)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
facilities21 %>%
ggplot(aes(x = facilities21)) +
geom_col(fill = "#003057", color ="#ffffff")
facilities21 %>%
ggplot(aes(x = `Overall facilities (i.e. academic, residential and recreational spaces)`, y=percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Overall facilities (i.e. academic, residential and recreational spaces) Satisfaction (2021)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`
df_sss21 <- df_sss21 %>% mutate () %>% facilities_fac <- factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A'))
df_sss21 <- df_sss21 %>% mutate (facilities_fac = factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A')) )
-
#read data files, initial exploration
sss21<-read_excel("2021 SSS Raw.xlsx")
names(sss21)
#glimpse(sss21$`Invite Custom Field 1`)
#select (and rename) variables to build separate data frames
sss21.qual<-select(sss21, starts_with("Please explain"))
names(sss21.qual)
sss21.slct<-sss21 %>% select(contains(":Please rate"))
#names(sss21.slct) [1]<-"Pid"
names(sss21.slct)<- gsub(":[A-Za-z]*.*$", "", names(sss21.slct))
names(sss21.slct)
#revert to data frame to make variables and detect values for each variable
df_sss21<-as.data.frame(sss21.slct)
str(df_sss21)
df_sss21 <- df_sss21 %>% mutate (facilities_fac = factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','N/A')) )
df_sss21$facilities_fac
df_sss21 <- df_sss21 %>% mutate (facilities_fac = factor(df_sss21$`Overall facilities (i.e. academic, residential and recreational spaces)`, levels = c('Poor', 'Acceptable', 'Good', 'Excellent','NA')) )
df_sss21$facilities_fac
facilities21_tab <- df_sss21 %>%
group_by(facilities_fac) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
facilities21_tab
facilities21_tab <- df_sss21 %>%
filter(!is.na(facilities_fac)) %>%
group_by(facilities_fac) %>%
summarize(cnt = n()) %>%
mutate(percentage = sprintf(cnt/sum(cnt)*100, fmt= "%#1.0f%%" )) #'%#.2f'
#3.bar plot
facilities21_tab
facilities21_tab %>%
ggplot(aes(x =facilities_fac , y=percentage)) +
geom_col(fill = "#003057", color ="#ffffff") +
theme_classic()+
labs(title = "Facilities (i.e. academic, residential and recreational spaces) Satisfaction (2021)")+
theme(plot.title = element_text(color = "#003057", size = 12, hjust = 0.5, face="bold"))+
labs(x = "", y = "")+
geom_text(aes(label = cnt), vjust = 2, size = 3, color="#ffffff") #vjust=-0.5 lable up
list.files()
datamart21<- read_excel("Datamart21Fall.xlsx")
registar21<- read_excel("Registar21Fall.xlsx")
datamart21<- as.data.frame(read_excel("Datamart21Fall.xlsx"))
registar21<- as.data.frame(read_excel("Registar21Fall.xlsx"))
str(datamart21)
str(registar21)
